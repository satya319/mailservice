# Quick Start Guide - CustomMail for jamjhadi.shop

This guide will help you quickly set up your CustomMail server for the domain `jamjhadi.shop` with the email address `manager@jamjhadi.shop`.

## Prerequisites

- A server with a public IP address
- Domain `jamjhadi.shop` with DNS management access
- Node.js installed on your server
- Ports 25, 587, 3001, and 3002 accessible

## Step 1: Update Server IP

1. Get your server's public IP address:
   ```bash
   curl ifconfig.me
   ```

2. Update the IP in `config.js`:
   ```javascript
   // Replace YOUR_SERVER_IP with your actual IP
   ip: 'YOUR_ACTUAL_SERVER_IP'
   ```

## Step 2: Generate DKIM Keys

```bash
npm run generate-dkim
```

This will create DKIM keys and show you the DNS record to add.

## Step 3: Configure DNS Records

Add these DNS records to your domain `jamjhadi.shop`:

### A Record
- **Type**: A
- **Name**: mail
- **Value**: [Your server IP]
- **TTL**: 3600

### MX Record
- **Type**: MX
- **Name**: @ (or jamjhadi.shop)
- **Value**: mail.jamjhadi.shop
- **Priority**: 10
- **TTL**: 3600

### SPF Record
- **Type**: TXT
- **Name**: @ (or jamjhadi.shop)
- **Value**: `v=spf1 mx a ip4:[YOUR_SERVER_IP] ~all`
- **TTL**: 3600

### DMARC Record
- **Type**: TXT
- **Name**: _dmarc
- **Value**: `v=DMARC1; p=quarantine; rua=mailto:dmarc@jamjhadi.shop`
- **TTL**: 3600

### DKIM Record
- **Type**: TXT
- **Name**: default._domainkey
- **Value**: [Generated by the DKIM script]
- **TTL**: 3600

## Step 4: Configure Firewall

```bash
# Allow SMTP ports
sudo ufw allow 25/tcp
sudo ufw allow 587/tcp

# Allow web interface
sudo ufw allow 3001/tcp
sudo ufw allow 3002/tcp

# Enable firewall
sudo ufw enable
```

## Step 5: Start the Server

```bash
npm start
```

Your server will be available at:
- **Web Interface**: http://[your-server-ip]:3001
- **Email Address**: manager@jamjhadi.shop

## Step 6: Test Your Setup

```bash
# Test DNS configuration
npm run test-dns

# Test SMTP connection
npm run test-smtp

# Run all tests
npm run test-production
```

## Step 7: Send Your First Email

1. Open the web interface: http://[your-server-ip]:3001
2. Click "Compose"
3. Send a test email to your Gmail account
4. Check if it arrives (may be in spam folder initially)

## Step 8: Test Receiving Emails

1. Send an email from Gmail to: manager@jamjhadi.shop
2. Check your web interface to see if it appears in the inbox

## Common Issues and Solutions

### Emails Going to Spam
- Verify all DNS records are correctly configured
- Set up reverse DNS (PTR record) with your hosting provider
- Start with low email volume to build reputation

### Cannot Receive Emails
- Check if port 25 is open and accessible
- Verify MX record is correctly configured
- Check server logs for errors

### Cannot Send Emails
- Verify SPF record includes your server IP
- Check if your hosting provider blocks port 25
- Consider using an email relay service for better deliverability

### DNS Records Not Resolving
- Wait 24-48 hours for DNS propagation
- Use online tools like MXToolbox to verify records
- Check with your DNS provider for any issues

## Production Deployment

For production use:

1. **Get SSL Certificates**:
   ```bash
   sudo certbot certonly --standalone -d mail.jamjhadi.shop
   ```

2. **Set up Systemd Service**:
   ```bash
   npm run setup
   ```

3. **Configure Reverse DNS**: Contact your hosting provider

4. **Monitor Logs**: Set up log monitoring and alerts

## Support and Documentation

- **Full DNS Guide**: See `DNS_SETUP_GUIDE.md`
- **Production Setup**: Run `npm run setup`
- **Testing**: Use `npm run test-production`

## Security Recommendations

1. **Enable Authentication**: Set `auth.required: true` in config.js
2. **Use SSL/TLS**: Configure HTTPS and secure SMTP
3. **Regular Updates**: Keep Node.js and dependencies updated
4. **Monitor Access**: Set up fail2ban for brute force protection
5. **Backup Data**: Regular backups of the `data/emails` directory

## Getting Help

If you encounter issues:

1. Check the server logs
2. Verify DNS records with online tools
3. Test with `npm run test-production`
4. Ensure firewall rules are correct
5. Contact your hosting provider about port 25 access

---

**Your Email Server Details:**
- **Domain**: jamjhadi.shop
- **Email**: manager@jamjhadi.shop
- **Mail Server**: mail.jamjhadi.shop
- **Web Interface**: http://[your-server-ip]:3001

ðŸŽ‰ **Congratulations!** You now have your own email server running on your domain!